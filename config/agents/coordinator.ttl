@prefix agent: <https://tensegrity.it/vocab/agent#> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix schema: <https://schema.org/> .
@prefix xmpp: <https://tensegrity.it/vocab/xmpp#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix lng: <http://purl.org/stuff/lingue/> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix mfr: <http://purl.org/stuff/mfr/> .

<#coordinator> a agent:ConversationalAgent, mfr:Coordinator, lng:Agent ;
  foaf:nick "Coordinator" ;
  schema:identifier "coordinator" ;
  dcterms:created "2025-12-22T00:00:00Z"^^xsd:dateTime ;
  dcterms:description "MFR protocol coordinator for orchestrating collaborative model construction and constrained reasoning" ;

  # Lingue protocol support
  lng:supports lng:HumanChat, lng:ModelFirstRDF, lng:ModelNegotiation, lng:ShaclValidation ;
  lng:prefers lng:ModelFirstRDF ;
  lng:profile <#coordinator-lingue-profile> ;

  # XMPP configuration
  agent:xmppAccount [
    a xmpp:Account ;
    xmpp:service "xmpp://tensegrity.it:5222" ;
    xmpp:domain "tensegrity.it" ;
    xmpp:username "coordinator" ;
    xmpp:passwordKey "coordinator" ;
    xmpp:resource "Coordinator"
  ] ;

  # Primary room for receiving user requests
  agent:roomJid "general@conference.tensegrity.it" ;

  # MFR command capabilities
  agent:hasCapability [
    a agent:Capability ;
    rdfs:label "Start MFR Session" ;
    dcterms:description "Initiate a Model-First Reasoning collaborative session" ;
    agent:command "mfr-start" ;
    agent:commandAlias "start"
  ] ;

  agent:hasCapability [
    a agent:Capability ;
    rdfs:label "Debate Tool Selection" ;
    dcterms:description "Initiate collaborative debate for tool selection" ;
    agent:command "mfr-debate" ;
    agent:commandAlias "debate"
  ] ;

  agent:hasCapability [
    a agent:Capability ;
    rdfs:label "Contribute to MFR" ;
    dcterms:description "Submit a model contribution to active MFR session" ;
    agent:command "mfr-contribute" ;
    agent:commandAlias "contribute"
  ] ;

  agent:hasCapability [
    a agent:Capability ;
    rdfs:label "Validate Model" ;
    dcterms:description "Request SHACL validation of contributed models" ;
    agent:command "mfr-validate" ;
    agent:commandAlias "validate"
  ] ;

  agent:hasCapability [
    a agent:Capability ;
    rdfs:label "Solve with Constraints" ;
    dcterms:description "Request constraint-based reasoning to solve the problem" ;
    agent:command "mfr-solve" ;
    agent:commandAlias "solve"
  ] ;

  agent:hasCapability [
    a agent:Capability ;
    rdfs:label "Get Session Status" ;
    dcterms:description "Display current status of active MFR session" ;
    agent:command "mfr-status" ;
    agent:commandAlias "status"
  ] ;

  agent:hasCapability [
    a agent:Capability ;
    rdfs:label "List Sessions" ;
    dcterms:description "List all active MFR sessions" ;
    agent:command "mfr-list" ;
    agent:commandAlias "list"
  ] ;

  agent:hasCapability [
    a agent:Capability ;
    rdfs:label "MFR Help" ;
    dcterms:description "Display help information for MFR commands" ;
    agent:command "mfr-help" ;
    agent:commandAlias "help"
  ] ;

  # MFR-specific configuration
  agent:mfrConfig [
    a mfr:CoordinatorConfig ;
    mfr:shapesPath "vocabs/mfr-shapes.ttl" ;
    mfr:enableDebate "true"^^xsd:boolean ;
    mfr:contributionTimeout "30000"^^xsd:integer ;
    mfr:validationTimeout "10000"^^xsd:integer ;
    mfr:reasoningTimeout "60000"^^xsd:integer ;
    mfr:debateTimeout "60000"^^xsd:integer ;
    mfr:planningDefaultRoute "consensus"
  ] ;

  # Orchestrated phases
  mfr:orchestratesPhases
    mfr:ModelConstruction,
    mfr:ModelValidation,
    mfr:ConstrainedReasoning .

<#coordinator-lingue-profile> a lng:Profile ;
  lng:availability lng:Process ;
  lng:in [
    a lng:Interface ;
    rdfs:label "XMPP MUC text + RDF models + negotiation messages"
  ] ;
  lng:out [
    a lng:Interface ;
    rdfs:label "XMPP MUC orchestration + validation reports + synthesis results"
  ] ;
  lng:dependsOn
    [ a lng:Environment ; rdfs:label "XMPP/Prosody" ],
    [ a lng:Environment ; rdfs:label "MFR agents (Mistral, Data, Prolog, Semem)" ],
    [ a lng:Environment ; rdfs:label "SHACL validator" ] ;
  lng:alang "JavaScript" .

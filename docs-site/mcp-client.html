<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MCP Client Guide</title>
    <style>
      body { margin: 0; padding: 48px 20px; font-family: "Helvetica Neue", Arial, sans-serif; background: #f7f4ef; color: #1f1b16; }
      main { max-width: 920px; margin: 0 auto; background: #fffdf9; padding: 48px; border: 1px solid #e3d8c7; box-shadow: 6px 8px 0 #e3d8c7; }
      h1, h2, h3 { font-weight: 600; margin-top: 2rem; }
      pre { background: #1f1b16; color: #f7f4ef; padding: 16px; overflow: auto; }
      code { font-family: "SFMono-Regular", ui-monospace, Menlo, Monaco, Consolas, monospace; }
      a { color: #8a3b12; }
      img { max-width: 100%; height: auto; }
      table { border-collapse: collapse; width: 100%; }
      th, td { border: 1px solid #e3d8c7; padding: 8px; }
    </style>
  </head>
  <body>
    <main>
      <h1>MCP Client Guide</h1>
<p>Status: maintained; review after major changes.</p>
<p>TIA MCP client support lives in <code>src/mcp/client-bridge.js</code>.</p>
<h2>Basic Usage</h2>
<pre><code class="language-javascript">import { McpClientBridge } from &quot;../src/mcp/client-bridge.js&quot;;
import { loadAgentProfile } from &quot;../src/agents/profile-loader.js&quot;;

const profile = await loadAgentProfile(&quot;demo&quot;);
const bridge = new McpClientBridge({
  profile,
  serverParams: {
    command: &quot;node&quot;,
    args: [&quot;src/mcp/servers/sparql-server.js&quot;],
    env: process.env
  }
});

await bridge.connect();
await bridge.populateProfile();

console.log(profile.mcp.tools);
console.log(profile.mcp.endpoints);
</code></pre>
<h2>Tool Metadata Mapping</h2>
<ul>
<li>MCP tools → <code>profile.mcp.tools</code></li>
<li>MCP resources → <code>profile.mcp.resources</code></li>
<li>MCP prompts → <code>profile.mcp.prompts</code></li>
<li>Tool <code>_meta.tia.endpoints</code> → <code>profile.mcp.endpoints</code></li>
</ul>
<p>See <code>vocabs/mcp-ontology.ttl</code> for the RDF vocabulary.</p>
<h2>Room-aware messaging</h2>
<p>When calling MCP chat tools from a client, pass explicit room IDs to avoid ambiguity:</p>
<ul>
<li><code>sendMessage</code> supports <code>roomJid</code> for room delivery and <code>directJid</code> for DMs.</li>
<li><code>getRecentMessages</code> supports <code>roomJid</code> to filter to the general or log room.</li>
</ul>

    </main>
  </body>
</html>
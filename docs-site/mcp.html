<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Model Context Protocol (MCP)</title>
    <style>
      body { margin: 0; padding: 48px 20px; font-family: "Helvetica Neue", Arial, sans-serif; background: #f7f4ef; color: #1f1b16; }
      main { max-width: 920px; margin: 0 auto; background: #fffdf9; padding: 48px; border: 1px solid #e3d8c7; box-shadow: 6px 8px 0 #e3d8c7; }
      h1, h2, h3 { font-weight: 600; margin-top: 2rem; }
      pre { background: #1f1b16; color: #f7f4ef; padding: 16px; overflow: auto; }
      code { font-family: "SFMono-Regular", ui-monospace, Menlo, Monaco, Consolas, monospace; }
      a { color: #8a3b12; }
      img { max-width: 100%; height: auto; }
      table { border-collapse: collapse; width: 100%; }
      th, td { border: 1px solid #e3d8c7; padding: 8px; }
    </style>
  </head>
  <body>
    <main>
      <h1>Model Context Protocol (MCP)</h1>
<p>Status: maintained; review after major changes.</p>
<p>This document summarizes how TIA exposes MCP servers and how to connect with MCP clients.
For detailed tooling, see <code>docs/mcp-server.md</code> and <code>docs/mcp-client.md</code>.</p>
<h2>MCP Servers in This Repo</h2>
<ul>
<li><strong>Chat + Lingue server</strong>: <code>node src/mcp/servers/tia-mcp-server.js</code><ul>
<li>Exposes XMPP tools like <code>sendMessage</code>, <code>getRecentMessages</code>, <code>offerLingueMode</code>.</li>
</ul>
</li>
<li><strong>Echo/debug server</strong>: <code>node src/mcp/servers/Echo.js</code><ul>
<li>Simple JSON-RPC echo plus basic XMPP diagnostics.</li>
</ul>
</li>
<li><strong>SPARQL server</strong>: <code>node src/mcp/servers/sparql-server.js</code><ul>
<li>SPARQL query/update for knowledge graphs.</li>
</ul>
</li>
</ul>
<h2>Recommended Configuration</h2>
<p>Use explicit profiles and room IDs (avoid implicit defaults):</p>
<pre><code>AGENT_PROFILE=mistral
MUC_ROOM=general@conference.your-domain
LOG_ROOM_JID=log@conference.your-domain
</code></pre>
<p>XMPP credentials live in <code>config/agents/secrets.json</code> (or <code>AGENT_SECRETS_PATH</code>).</p>
<h2>Client Setup Examples</h2>
<h3>Claude Code / Claude Desktop</h3>
<pre><code class="language-bash">claude mcp add tia-chat node /path/to/tia/src/mcp/servers/tia-mcp-server.js
</code></pre>
<h3>Codex CLI</h3>
<pre><code class="language-bash">codex mcp add tia-chat --env TIA_ENV_PATH=/path/to/tia/.env -- node /path/to/tia/src/mcp/servers/tia-mcp-server.js
</code></pre>
<h2>Notes</h2>
<ul>
<li>The MCP chat server joins the log room and writes verbose traces there.</li>
<li>Use <code>roomJid</code> in <code>sendMessage</code> and <code>getRecentMessages</code> to target specific rooms.</li>
</ul>

    </main>
  </body>
</html>